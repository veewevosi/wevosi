{% extends "base.html" %}

{% block title %}Account - Dark Theme Auth{% endblock %}

{% block content %}
<div class="account-container">
    <div class="profile-section">
        <div class="profile-picture">
            {% if current_user.profile_picture %}
                <img src="{{ url_for('static', filename=current_user.profile_picture) }}" alt="Profile Picture">
            {% else %}
                <img src="{{ url_for('static', filename='icons/user.svg') }}" alt="Default Profile">
            {% endif %}
        </div>
        <form action="{{ url_for('upload_profile_picture') }}" method="POST" enctype="multipart/form-data" class="upload-form">
            <div class="form-group">
                <label for="profile_picture" class="btn">Change Profile Picture</label>
                <input type="file" id="profile_picture" name="profile_picture" accept="image/*" required>
            </div>
            <button type="submit" class="btn">Upload</button>
        </form>
    </div>

    <h2>Welcome, {{ current_user.username }}</h2>
    
    <div class="account-details">
        <div class="detail-group">
            <label>Username</label>
            <p>{{ current_user.username }}</p>
        </div>
        
        <div class="detail-group">
            <label>Email</label>
            <p>{{ current_user.email }}</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.getElementById('profile_picture').addEventListener('change', function() {
    if (this.files && this.files[0]) {
        document.querySelector('button[type="submit"]').style.display = 'inline-block';
    }
});
</script>
{% endblock %}
